---
description: 
globs: 
alwaysApply: false
---
# Development Rules

## 1. Code Creation and Modification
1. **Pre-Action Requirements**
   - MUST search entire codebase before proposing any code changes
   - MUST report search results to user
   - MUST wait for explicit approval before any code action

2. **Proposal Format**
   - MUST explain changes in layman's terms
   - MUST specify file locations
   - MUST reference existing files/variables by name
   - MUST NOT include code snippets unless specifically requested

3. **Approval Process**
   - MUST get explicit approval for:
     - File creation
     - File modification
     - File location
     - File naming
   - MUST NOT proceed without approval
   - MUST confirm understanding of approval before proceeding

## 2. Directory Structure
1. **Base Structure**
   ```
   src/
   ├── app/                    # Next.js app router
   │   ├── admin/             # Admin area
   │   └── view/              # Public viewing area
   ├── components/            # React components
   │   ├── admin/            # Admin components
   │   ├── common/           # Shared components
   │   ├── layouts/          # Layout components
   │   ├── navigation/       # Navigation components
   │   └── view/            # View components
   └── lib/                  # Shared resources
       ├── config/          # Configuration
       ├── contexts/        # React contexts
       ├── firebase/        # Firebase setup
       ├── hooks/           # Custom hooks
       ├── scripts/         # Utility scripts
       ├── services/        # Business logic
       ├── types/           # TypeScript types
       └── utils/           # Utility functions
   ```

2. **Component Organization**
   - MUST place components in appropriate subdirectory based on function
   - MUST NOT mix function-based and feature-based organization
   - MUST follow the structure defined above
   - MUST place shared components in common/ directory
   - MUST place component-specific types in lib/types/

## 3. Naming Conventions
1. **File Naming**
   - MUST use kebab-case for folders and CSS files
   - MUST use PascalCase for React components
   - MUST use camelCase for:
     - Hooks
     - Utilities
     - Types
     - Services
     - Scripts
     - JavaScript variables
     - Function names

2. **Component Naming**
   - MUST use PascalCase for component files
   - MUST match component name with file name
   - MUST use .module.css for component styles

## 4. Configuration and Environment
1. **Environment Variables**
   - MUST use .env for environment variables
   - MUST document required variables in script headers
   - MUST validate required variables before execution

2. **Firebase Configuration**
   - MUST use client SDK for browser operations
   - MUST use admin SDK for server operations
   - MUST NOT mix client and admin SDKs
   - MUST use correct environment variables for each SDK

3. **Script Execution**
   - MUST use PowerShell for script execution
   - MUST execute scripts using:
     ```powershell
     npx ts-node -r tsconfig-paths/register -P tsconfig.scripts.json src/lib/scripts/<script-name>
     ```
   - MUST handle file operations sequentially, not in parallel
   - MUST validate file operations before proceeding
   - MUST use proper error handling for file operations
   - MUST log operation results

## 5. Code Documentation
1. **Code Comments**
   - MUST include comments explaining:
     - Complex logic
     - Business rules
     - Non-obvious decisions
     - Edge cases
   - SHOULD explain the "why" not just the "what"
   - SHOULD document assumptions and constraints

2. **Component Documentation**
   - MUST document:
     - Component purpose
     - Props and their types
     - Usage examples
     - Dependencies
   - SHOULD explain component relationships
   - SHOULD document state management approach

3. **Type Documentation**
   - MUST document:
     - Type purpose
     - Field meanings
     - Usage constraints
   - SHOULD provide examples of valid values
   - SHOULD explain type relationships





